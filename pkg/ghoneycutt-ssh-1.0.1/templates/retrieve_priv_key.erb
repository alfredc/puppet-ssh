<%=
mod=Puppet::Module.find "ssh"

raise("cannot find ssh module") unless mod
#puts mod.path

keyDir=mod.path+"/private_keys"
#puts keyDir

# throw an exception if the keyDir does not exist
raise("cannot find key directory: %s" % keyDir) unless FileTest.exist?(keyDir)

keyFile=File.join(keyDir,user) 
# throw an exception
raise("cannot find key file: %s" % keyFile) unless FileTest.exist?(keyFile)
# reading in file and removing whitespace - last value of block is the return value
File.read(keyFile).chomp
%>
